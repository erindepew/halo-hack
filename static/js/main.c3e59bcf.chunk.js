(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,n){e.exports=n(92)},92:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(46),i=n.n(o),c=n(27),s=n(13),u=n(18),l=n(15),d=n(14),f=n(16),p=n(20),h=n(96),m=n(47),g=n.n(m),b=n(4),v=n(2),y=n(93);function k(){var e=Object(b.a)(["\n    margin-top: 40px;\n    text-decoration: none;\n    cursor: pointer;\n"]);return k=function(){return e},e}function j(){var e=Object(b.a)(["\nbackground-color: black;\nposition: absolute;\nmin-height: 100vh;\nwidth: 100%;\ntop: 0;\nright: 0;\nleft: 0%;\ntext-align: center;\nfont-family: Arial, Helvetica, sans-serif; \n"]);return j=function(){return e},e}var O=v.c.div(j()),w=Object(v.c)(y.a)(k()),E=n(26),x=n.n(E),C=n(31),I=n(94),A=n(99),T=n(1),z=n(100);function S(){var e=Object(b.a)(["\n  float: left;\n  text-align: left;\n  margin-left: 20px;\n"]);return S=function(){return e},e}function Z(){var e=Object(b.a)(["\n  float: left;\n  height: 64px;\n  width: 64px;\n"]);return Z=function(){return e},e}function F(){var e=Object(b.a)([" \n  margin: 0 0 8px;\n  border-bottom: 1px solid ",";\n"]);return F=function(){return e},e}function M(){var e=Object(b.a)(["\n  text-decoration: none;\n"]);return M=function(){return e},e}function P(){var e=Object(b.a)(["\n  margin: 0;\n"]);return P=function(){return e},e}function X(){var e=Object(b.a)(["\n  margin: 20px;\n"]);return X=function(){return e},e}function D(){var e=Object(b.a)(["\ntransform-style: preserve-3d;\nposition: absolute;\nwidth: ","%;\nheight: ","%;\ntransform: rotateX(3deg) rotateY(3deg) rotateZ(3deg);\nanimation: "," ","s linear infinite;\n\n&::after {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    border-radius: 50%;\n    border-left: "," solid hsla(",", 1);\n    animation: "," 1s linear infinite;\n    ","\n}"]);return D=function(){return e},e}function W(){var e=Object(b.a)(["\nposition: absolute;\ntransform-style: preserve-3d;\ntop: 0;\nbottom: 0;\nright: 0;\nleft: 0;\nwidth: ","em;\nheight: ","em;\nmargin: 50px auto;\ntransform: rotateX(60deg) rotateZ(90deg);\nanimation: "," ","s linear infinite;\n  "]);return W=function(){return e},e}function U(){var e=Object(b.a)(["\n  perspective: 800;\n"]);return U=function(){return e},e}function L(){var e=Object(b.a)(["\nfrom {\n  transform: rotateZ(0deg)\n}\nto {\n  transform: rotateZ(360deg)}"]);return L=function(){return e},e}function _(){var e=Object(b.a)(["\nfrom {\n  transform: rotateX(60deg) rotateZ(0deg)}\nto {\n  transform: rotateX(60deg) rotateZ(360deg)}"]);return _=function(){return e},e}function R(){var e=Object(b.a)(["\nfrom {\n  transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)\n}\nto{\n  transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg)}"]);return R=function(){return e},e}var Y=Object(v.d)(R()),J=Object(v.d)(_()),N=Object(v.d)(L()),B=v.c.div(U()),V=v.c.div(W(),function(e){return e.size},function(e){return e.size},J,function(e){return e.speed}),H=v.c.div(D(),function(e){return e.size},function(e){return e.size},Y,function(e){return e.speed},function(e){return e.thickness},function(e){return e.highlight},N,function(e){return"box-shadow: -1px 0 hsla(".concat(e.highlight,", 1), -4px 0 8px hsla(").concat(e.mainColor,",1), inset 4px 0 8px hsla(").concat(e.shadow,", 0.7);")}),$=v.c.div(X()),q=Object(v.c)(I.a.p)(P()),G=v.c.a(M()),K=Object(v.c)(I.a.p)(F(),T.white),Q=Object(v.c)(z.a)(Z()),ee=v.c.div(S()),te=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={complexity:0,speed:0,saturation:0,size:0,randomness:0,thickness:0,hue:0,isLoading:!0,audioInfo:null,type:null},n.setValues=function(){var e=Object(C.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAudioFeatures(t);case 2:return e.next=4,n.getAudioInfo(t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getAudioInfo=function(){var e=Object(C.a)(x.a.mark(function e(t){var r,a;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.getContentType(t),a=n.getContentId(t),n.props.setError(""),"track"===r&&n.props.spotifyWebAPI.getTrack(a,function(e,t){e?n.props.setError(e):n.setState({audioInfo:t,type:r})}),"artist"===r&&n.props.spotifyWebAPI.getArtist(a,function(e,t){e?n.props.setError(e):n.setState({audioInfo:t,type:r})});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.getContentId=function(e){return e.split(":")[2]},n.getContentType=function(e){var t=e.split(":")[1];return n.setState({type:t}),t},n.getAudioFeatures=function(e){var t=n.getContentType(e),r=n.getContentId(e);n.props.setError(""),"track"===t&&n.props.spotifyWebAPI.getAudioFeaturesForTrack(r,function(e,t){if(e)n.props.setError(e);else{var r=t.danceability,a=t.energy,o=t.tempo,i=t.loudness,c=t.acousticness,s=t.key;n.setState({randomness:Math.round(10*r),complexity:Math.round(10*a),speed:Math.round(500/o),size:Math.round(i+30),thickness:Math.round(20*c),saturation:10*Math.round(10*a),hue:15*s})}}),"artist"===t?n.props.spotifyWebAPI.getArtistTopTracks(r,"US",function(e,t){e?n.props.setError(e):n.getAudioFeaturesForTracks(t.tracks)}):n.props.setError('Not a valid track or artist spotify URI. Must be in "spotify:artist:{id}" or "spotify:track:{id}" format')},n.getAudioFeaturesForTracks=function(e){var t=e.map(function(e){return n.getContentId(e.uri)});n.props.setError(""),n.props.spotifyWebAPI.getAudioFeaturesForTracks(t,function(e,t){if(e)n.props.setError(e);else{var r=n.averageAudioFeaturesForTracks(t.audio_features),a=r.danceability,o=r.energy,i=r.tempo,c=r.loudness,s=r.acousticness,u=r.key;n.setState({randomness:Math.round(10*a),complexity:Math.round(10*o),speed:Math.round(500/i),size:Math.round(c+30),thickness:Math.round(20*s),saturation:10*Math.round(10*o),hue:15*u})}})},n.averageAudioFeaturesForTracks=function(e){var t={},n=e.reduce(function(e,t){return{danceability:e.danceability+t.danceability,energy:e.energy+t.energy,key:e.key+t.key,acousticness:e.acousticness+t.acousticness,loudness:e.loudness+t.loudness,mode:e.mode+t.mode,tempo:e.tempo+t.tempo}});return Object.keys(n).map(function(r){return t[r]=n[r]/e.length}),t},n.renderDivs=function(e,t){var r=n.state,o=r.hue,i=r.saturation,c=r.speed,s=r.randomness,u=r.thickness,l="".concat(o,", ").concat(i/2,"%, 50%"),d="".concat(o,", ").concat(i,"%, 50%"),f="".concat(o+15,", ").concat(i,"%, 30%");if(!(t>0))return a.a.createElement(H,{key:t,size:100-s,speed:c,highlight:l,mainColor:d,shadow:f,thickness:u});for(var p=0;p<e;p++)return a.a.createElement(H,{key:t,size:100-s,speed:c,highlight:l,mainColor:d,shadow:f,thickness:u},n.renderDivs(e,t-1))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setValues(window.location.pathname.split("/").pop())}},{key:"render",value:function(){var e=this.state,t=e.complexity,n=e.size,r=e.audioInfo,o=e.type;return console.log(JSON.stringify(this.state)),a.a.createElement("div",null,r?a.a.createElement("div",null,o&&"track"===o?a.a.createElement($,null,a.a.createElement(Q,{src:r.album.images[2].url,alt:"album image"}),a.a.createElement(ee,null,a.a.createElement(G,{href:r.external_urls.spotify},a.a.createElement(K,{variant:I.a.body1,color:T.white},r.name)),a.a.createElement(q,{variant:I.a.body3,color:T.white},r.album.name),a.a.createElement(q,{variant:I.a.body3,color:T.white},r.album.artists[0].name))):a.a.createElement($,null,a.a.createElement(Q,{src:r.images[2].url,alt:"arist image"}),a.a.createElement(ee,null,a.a.createElement(G,{href:r.external_urls.spotify},a.a.createElement(K,{variant:I.a.body1,color:T.white},r.name)))),a.a.createElement(B,null,a.a.createElement(V,{speed:2,size:n},this.renderDivs(1,t)))):a.a.createElement(A.a,null))}}]),t}(r.Component),ne=Object(p.f)(te);function re(){var e=Object(b.a)(["\ntransform-style: preserve-3d;\nposition: absolute;\nwidth: ","%;\nheight: ","%;\ntransform: rotateX(3deg) rotateY(3deg) rotateZ(3deg);\nanimation: "," ","s linear infinite;\n\n&::after {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    border-radius: 50%;\n    border-left: "," solid hsla(",", 1);\n    animation: "," 1s linear infinite;\n    ","\n}"]);return re=function(){return e},e}function ae(){var e=Object(b.a)(["\nposition: absolute;\ntransform-style: preserve-3d;\ntop: 0;\nbottom: 0;\nright: 0;\nleft: 0;\nwidth: ","em;\nheight: ","em;\nmargin: 50px auto;\ntransform: rotateX(60deg) rotateZ(90deg);\nanimation: "," ","s linear infinite;\n  "]);return ae=function(){return e},e}function oe(){var e=Object(b.a)(["\n  perspective: 800;\n"]);return oe=function(){return e},e}function ie(){var e=Object(b.a)(["\nfrom {\n  transform: rotateX(60deg) rotateZ(0deg)}\nto {\n  transform: rotateX(60deg) rotateZ(360deg)}"]);return ie=function(){return e},e}function ce(){var e=Object(b.a)(["\nfrom {\n  transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)\n}\nto{\n  transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg)}"]);return ce=function(){return e},e}function se(){var e=Object(b.a)(["\nfrom {\n  transform: rotateZ(0deg)\n}\nto {\n  transform: rotateZ(360deg)}"]);return se=function(){return e},e}var ue=Object(v.d)(se()),le=Object(v.d)(ce()),de=Object(v.d)(ie()),fe=v.c.div(oe()),pe=v.c.div(ae(),function(e){return e.size},function(e){return e.size},de,function(e){return e.speed}),he=v.c.div(re(),function(e){return e.size},function(e){return e.size},le,function(e){return e.speed},function(e){return e.thickness},function(e){return e.highlight},ue,function(e){return"box-shadow: -1px 0 hsla(".concat(e.highlight,", 1), -4px 0 8px hsla(").concat(e.mainColor,",1), inset 4px 0 8px hsla(").concat(e.shadow,", 0.7);")}),me=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={complexity:5,speed:4,saturation:50,size:18,randomness:4,thickness:2,hue:135},n.renderDivs=function(e,t){var r=n.state,o=r.hue,i=r.saturation,c=r.speed,s=r.randomness,u=r.thickness,l="".concat(o,", ").concat(i/2,"%, 50%"),d="".concat(o,", ").concat(i,"%, 50%"),f="".concat(o+15,", ").concat(i,"%, 30%");if(!(t>0))return a.a.createElement(he,{key:t,size:100-s,speed:c,highlight:l,mainColor:d,shadow:f,thickness:u});for(var p=0;p<e;p++)return a.a.createElement(he,{key:t,size:100-s,speed:c,highlight:l,mainColor:d,shadow:f,thickness:u},n.renderDivs(e,t-1))},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.complexity,n=e.size;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(fe,null,a.a.createElement(pe,{speed:2,size:n},this.renderDivs(1,t)))))}}]),t}(r.PureComponent),ge=n(95),be=n(98),ve=n(97);function ye(){var e=Object(b.a)(["\n    max-width: 750px;\n    margin: 50px 20px;\n    width: 100%;\n    display: inline-block;\n"]);return ye=function(){return e},e}function ke(){var e=Object(b.a)(["\nwidth: 100%;\nmargin-bottom: 30px;\n"]);return ke=function(){return e},e}function je(){var e=Object(b.a)(["\n    width: 100%;    \n"]);return je=function(){return e},e}var Oe=Object(v.c)(ge.a)(je()),we=Object(v.c)(be.a)(ke()),Ee=Object(v.c)(ve.a)(ye()),xe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={uri:null},n.onSubmit=function(){n.props.onSubmit(n.state.uri)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(Ee,null,a.a.createElement(we,{theme:be.a.darkTheme,type:"text",placeholder:"Enter an artist or track URI",onChange:function(t){return e.setState({uri:t.target.value})}}),a.a.createElement(Oe,{theme:ge.a.darkTheme,onClick:function(){return e.onSubmit()}},"Submit"))}}]),t}(r.PureComponent),Ce=(r.PureComponent,"ba28661128324b3dab365c0b4e57c41d"),Ie=n(34),Ae=n.n(Ie);var Te=n(52),ze=n.n(Te),Se=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){return n.props.history.push({pathname:"/render/".concat(e)})},n.setError=function(e){return n.setState({error:e})},n.state={userLoggedIn:!1,error:""},n.appToken=Ce,n.redirectURI=encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.host).concat("/halo-hack","/callback")),n.scopes=encodeURIComponent("playlist-modify-public playlist-modify-private user-read-private streaming user-read-email user-read-birthdate user-modify-playback-state user-read-playback-state user-read-currently-playing user-read-recently-played"),n.loginLink="https://accounts.spotify.com/authorize?client_id=".concat(n.appToken,"&redirect_uri=").concat(n.redirectURI,"&scope=").concat(n.scopes,"&response_type=token");var r={value:g.a.parse(window.location.hash).access_token,genDate:Date.now()};return r.value?n.setCurrentToken(r):r=n.getCurrentToken(),r&&r.value?(r.genDate<=Date.now()-36e5?n.removeCurrentToken():(n.state.userLoggedIn=!0,window.location.hash="",n.spotifyWebAPI=new ze.a,n.spotifyWebAPI.setAccessToken(n.getCurrentToken().value)),n.getUserProfile()):n.removeCurrentToken(),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"setCurrentToken",value:function(e){sessionStorage.setItem("tokenobject",JSON.stringify(e))}},{key:"getCurrentToken",value:function(){return JSON.parse(sessionStorage.getItem("tokenobject"))}},{key:"removeCurrentToken",value:function(){sessionStorage.removeItem("tokenobject")}},{key:"getUserProfile",value:function(){var e=this,t=this.getCurrentToken();t&&function(e){return Ae.a.get("https://api.spotify.com/v1/me",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}})}(t.value).then(function(t){var n=t.data;e.setState({user:n})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.userLoggedIn,r=t.error;return a.a.createElement(O,null,console.log("/halo-hack"),console.log(this.props.location),console.log(n),r&&a.a.createElement(h.a,{variant:h.a.error},r),a.a.createElement(p.b,{exact:!0,path:"".concat("/halo-hack","/"),render:function(){return n?a.a.createElement(xe,{onSubmit:e.onSubmit}):a.a.createElement(w,{href:e.loginLink},"Login with your Spotify Account")}}),a.a.createElement(p.b,{path:"".concat("/halo-hack","/callback"),render:function(){return a.a.createElement(p.a,{to:"/"})}}),a.a.createElement(p.b,{exact:!0,path:"".concat("/halo-hack","/render/static"),render:function(){return a.a.createElement(me,null)}}),a.a.createElement(p.b,{path:"".concat("/halo-hack","/render/:uri"),render:function(){return a.a.createElement(ne,{spotifyWebAPI:e.spotifyWebAPI,setError:e.setError})}}),a.a.createElement(p.b,{path:"*",component:function(){return a.a.createElement("div",null,"404 not found")}}))}}]),t}(r.Component),Ze=Object(p.f)(Se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(c.a,{basename:"/halo-hack"},a.a.createElement(Ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,1,2]]]);
//# sourceMappingURL=main.c3e59bcf.chunk.js.map